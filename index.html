
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Open edX Recent Commits</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  margin: 20px;
  color: #222;
}

.dark-mode {
  background: #0f172a;
  color: #e5e7eb;
}

.container {
  max-width: 1100px;
  margin: auto;
}

input {
  padding: 8px;
  margin: 4px;
}

.commit {
  border: 1px solid #ddd;
  padding: 10px;
  margin: 6px 0;
  border-radius: 6px;
}

.dark-mode .commit {
  border-color: #374151;
}

.repo-title {
  margin-top: 20px;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
<div class="container">

<h1>üìä Open edX commits (last 2 days)</h1>

<button onclick="toggleDark()">üåì Toggle dark mode</button>

<br><br>

<input id="searchBox" placeholder="Search message‚Ä¶" oninput="render()">
<input id="authorBox" placeholder="Filter author‚Ä¶" oninput="render()">
<input id="repoBox" placeholder="Filter repo‚Ä¶" oninput="render()">

<canvas id="chart" width="400" height="150"></canvas>

<div id="commits"></div>

</div>

<script>
const commits = [{"repo": "openedx/edx-platform", "message": "Merge pull request #37872 from openedx/feanil/update_gitignore", "author": "Feanil Patel", "date": "2026-01-14T15:31:15Z", "url": "https://github.com/openedx/edx-platform/commit/bac5e7efc623be20c4bd516979c1c2a1b6b876ec"}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37874 from openedx/feanil/remove_unused_bad_code", "author": "Feanil Patel", "date": "2026-01-14T15:26:03Z", "url": "https://github.com/openedx/edx-platform/commit/3dec1abcc9dbde1123e052af313c4c004209afd2"}, {"repo": "openedx/edx-platform", "message": "Revert \"refactor: hoist annotations for common settings with differing values\u2026\" (#37883)", "author": "Ahtisham Shahid", "date": "2026-01-14T15:08:04Z", "url": "https://github.com/openedx/edx-platform/commit/d71d46e313be79514114dc1b865795f8d896e249"}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37878 from openedx/feanil/update_readme_python_version", "author": "Feanil Patel", "date": "2026-01-13T21:38:20Z", "url": "https://github.com/openedx/edx-platform/commit/aea900061aaa8a098801d1b01484f999ee9b355a"}, {"repo": "openedx/edx-platform", "message": "docs: Apply suggestion from @kdmccormick", "author": "Feanil Patel", "date": "2026-01-13T19:17:59Z", "url": "https://github.com/openedx/edx-platform/commit/6062c04e8aefb48fe3d5a4d44b2294e0d7169d86"}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37879 from irfanuddinahmad/iahmad/ENT-10552", "author": "irfanuddinahmad", "date": "2026-01-13T16:40:40Z", "url": "https://github.com/openedx/edx-platform/commit/e6deac0cf12226c0b8d744ad17395373cfe0de03"}, {"repo": "openedx/edx-platform", "message": "chore: updated version of enterprise-integrated-channels", "author": "irfanuddinahmad", "date": "2026-01-13T15:56:17Z", "url": "https://github.com/openedx/edx-platform/commit/6e59e0f248a04b25f978243cfcc681cbab4a9805"}, {"repo": "openedx/edx-platform", "message": "Removed DEFAULT_HASHING_ALGORITHM from lms (#37820)", "author": "jawad khan", "date": "2026-01-13T13:13:52Z", "url": "https://github.com/openedx/edx-platform/commit/99e7492b5e5a0b65f739f02119a27c0ae922567b"}, {"repo": "openedx/edx-platform", "message": "feat: added new email template for batched email notification (#37844)", "author": "Ahtisham Shahid", "date": "2026-01-13T05:49:12Z", "url": "https://github.com/openedx/edx-platform/commit/14e508ea9fbd5e4c37385341fd9d756c630e0f27"}, {"repo": "openedx/frontend-app-authoring", "message": "feat: Make sections/subsections/units selectable in course outline [FC-0114] (#2732)", "author": "Chris Ch\u00e1vez", "date": "2026-01-13T02:12:46Z", "url": "https://github.com/openedx/frontend-app-authoring/commit/4cda17e04635957d685746c2af39dddeaa7b48af"}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37861 from openedx/dependabot/github_actions/actions/cache-5", "author": "Feanil Patel", "date": "2026-01-12T21:22:45Z", "url": "https://github.com/openedx/edx-platform/commit/bfc5fd5f944b11cf0196c23e54e19e373d6b869a"}, {"repo": "openedx/edx-platform", "message": "docs: Update the supported python version in the README.", "author": "Feanil Patel", "date": "2026-01-12T20:58:53Z", "url": "https://github.com/openedx/edx-platform/commit/d5cb793f8bdea4b6fff38a6aff06eca0188856e2"}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37860 from openedx/dependabot/github_actions/actions/download-artifact-7", "author": "Feanil Patel", "date": "2026-01-12T20:37:29Z", "url": "https://github.com/openedx/edx-platform/commit/88ee0b11a5e4685fcb9bc5f41ed0edf2edb7dad1"}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37862 from openedx/dependabot/github_actions/actions/upload-artifact-6", "author": "Feanil Patel", "date": "2026-01-12T20:36:43Z", "url": "https://github.com/openedx/edx-platform/commit/24b28d181178b7e5ae676d30241d75bbb64f8aad"}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37863 from openedx/dependabot/github_actions/peter-evans/create-pull-request-8", "author": "Feanil Patel", "date": "2026-01-12T20:35:55Z", "url": "https://github.com/openedx/edx-platform/commit/7f6c678ad478d44011d32c5ef1f09b7e87064048"}];

function hoursAgo(dateStr) {
  const then = new Date(dateStr);
  const diffMs = new Date() - then;
  const diffHrs = diffMs / 3600000;

  if (diffHrs < 1) return Math.round(diffHrs * 60) + " minutes ago";
  if (diffHrs < 24) return Math.round(diffHrs) + " hours ago";
  return Math.round(diffHrs / 24) + " days ago";
}

function toggleDark() {
  document.body.classList.toggle("dark-mode");
}

function render() {
  const searchBox = document.getElementById("searchBox");
  const authorBox = document.getElementById("authorBox");
  const repoBox = document.getElementById("repoBox");

  const search = searchBox ? searchBox.value.toLowerCase() : "";
  const author = authorBox ? authorBox.value.toLowerCase() : "";
  const repo = repoBox ? repoBox.value.toLowerCase() : "";

  const grouped = {};

  commits.forEach(c => {
    if (search && !c.message.toLowerCase().includes(search)) return;
    if (author && !c.author.toLowerCase().includes(author)) return;
    if (repo && !c.repo.toLowerCase().includes(repo)) return;

    if (!grouped[c.repo]) grouped[c.repo] = [];
    grouped[c.repo].push(c);
  });

  let html = "";

  Object.keys(grouped).forEach(r => {
    html += "<h2 class='repo-title'>üì¶ " + r + "</h2>";

    grouped[r].forEach(c => {
      html += `
        <div class="commit">
          <b>${c.message}</b><br>
          üë§ ${c.author} ‚Äî ‚è∞ ${hoursAgo(c.date)}<br>
          üîó <a href="${c.url}" target="_blank">View commit</a>
        </div>
      `;
    });
  });

  document.getElementById("commits").innerHTML = html;

  // ---- chart ----
  const labels = Object.keys(grouped);
  const repoCounts = labels.map(k => grouped[k].length);

  chart.data.labels = labels;
  chart.data.datasets[0].data = repoCounts;
  chart.update();
}

document.addEventListener("DOMContentLoaded", function () {
  render();
});

const ctx = document.getElementById("chart");
const chart = new Chart(ctx, {
  type: 'bar',
  data: {
    labels: [],
    datasets: [{
      label: "Commits (last 2 days)",
      data: []
    }]
  }
});
</script>

</body>
</html>
