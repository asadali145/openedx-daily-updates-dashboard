
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Open edX Daily Commits Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Primer GitHub style -->
<link rel="stylesheet" href="https://unpkg.com/@primer/css/dist/primer.css">

<style>
body {
    transition: background .3s, color .3s;
}
.container {
    max-width: 1100px;
    margin: auto;
    padding: 20px;
}
.commit {
    border: 1px solid #d0d7de;
    border-radius: 10px;
    padding: 10px 16px;
    margin-bottom: 10px;
    border-left: 6px solid transparent;
    background: #fff;
}
.commit.breaking {
    border-left: 6px solid #d73a49;
    background: #fff5f5;
}
.commit.dark {
    border-color: #30363d;
    background: #161b22;
}
.commit.breaking.dark {
    border-left: 6px solid #f85149;
    background: #2a1618;
}
.breaking-badge {
    display: inline-block;
    background: #d73a49;
    color: #fff;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 12px;
    margin-right: 8px;
    vertical-align: middle;
    font-weight: bold;
    letter-spacing: 0.5px;
}
.controls input, .controls select {
    margin-right: 8px;
    padding: 6px 10px;
    margin-bottom: 8px;
    border-radius: 6px;
    border: 1px solid #d0d7de;
}
.controls label {
    margin-right: 12px;
    font-weight: normal;
    font-size: 15px;
    vertical-align: middle;
}
.chart-box {
    border: 1px solid #d0d7de;
    padding: 10px;
    border-radius: 10px;
    margin-bottom: 20px;
}
</style>
</head>

<body>

<div class="container">

<h1>üöÄ Open edX Commits (last 2 days)</h1>

<button onclick="toggleDark()" class="btn">üåô Toggle Dark Mode</button>

<hr>

<div class="controls">
    <input id="searchBox" placeholder="Search keyword‚Ä¶" oninput="render()">
    <input id="authorBox" placeholder="Filter author‚Ä¶" oninput="render()">
    <select id="repoSelect" multiple size="4" style="vertical-align:middle; min-width:220px;" onchange="render()">
        <option value="">All repos</option>
        <option value="openedx/edx-platform">openedx/edx-platform</option><option value="openedx/frontend-app-learning">openedx/frontend-app-learning</option><option value="openedx/frontend-app-authoring">openedx/frontend-app-authoring</option><option value="openedx/frontend-app-discussions">openedx/frontend-app-discussions</option><option value="openedx/XBlock">openedx/XBlock</option><option value="openedx/paragon">openedx/paragon</option><option value="openedx/edx-celeryutils">openedx/edx-celeryutils</option><option value="openedx/frontend-base">openedx/frontend-base</option><option value="openedx/frontend-app-ora">openedx/frontend-app-ora</option><option value="openedx/frontend-platform">openedx/frontend-platform</option><option value="openedx/frontend-plugin-framework">openedx/frontend-plugin-framework</option><option value="openedx/frontend-app-gradebook">openedx/frontend-app-gradebook</option>
    </select>
    <input id="repoBox" placeholder="Filter repo (text)‚Ä¶" oninput="render()">
    <label>
        <input type="checkbox" id="breakingOnly" onchange="render()" style="vertical-align:middle;">
        Show only breaking changes
    </label>
</div>

<h3>üìä Commit count by repository</h3>
<div class="chart-box">
    <canvas id="chart" height="80"></canvas>
</div>

<h3>üß≠ Commits</h3>
<div id="commits"></div>

<p>Last generated: 2026-01-14 17:20:12 UTC</p>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {

    const commits = [{"repo": "openedx/edx-platform", "message": "Merge pull request #37872 from openedx/feanil/update_gitignore", "author": "Feanil Patel", "date": "2026-01-14T15:31:15Z", "url": "https://github.com/openedx/edx-platform/commit/bac5e7efc623be20c4bd516979c1c2a1b6b876ec", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37874 from openedx/feanil/remove_unused_bad_code", "author": "Feanil Patel", "date": "2026-01-14T15:26:03Z", "url": "https://github.com/openedx/edx-platform/commit/3dec1abcc9dbde1123e052af313c4c004209afd2", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "Revert \"refactor: hoist annotations for common settings with differing values\u2026\" (#37883)", "author": "Ahtisham Shahid", "date": "2026-01-14T15:08:04Z", "url": "https://github.com/openedx/edx-platform/commit/d71d46e313be79514114dc1b865795f8d896e249", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37878 from openedx/feanil/update_readme_python_version", "author": "Feanil Patel", "date": "2026-01-13T21:38:20Z", "url": "https://github.com/openedx/edx-platform/commit/aea900061aaa8a098801d1b01484f999ee9b355a", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "docs: Apply suggestion from @kdmccormick", "author": "Feanil Patel", "date": "2026-01-13T19:17:59Z", "url": "https://github.com/openedx/edx-platform/commit/6062c04e8aefb48fe3d5a4d44b2294e0d7169d86", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37879 from irfanuddinahmad/iahmad/ENT-10552", "author": "irfanuddinahmad", "date": "2026-01-13T16:40:40Z", "url": "https://github.com/openedx/edx-platform/commit/e6deac0cf12226c0b8d744ad17395373cfe0de03", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "chore: updated version of enterprise-integrated-channels", "author": "irfanuddinahmad", "date": "2026-01-13T15:56:17Z", "url": "https://github.com/openedx/edx-platform/commit/6e59e0f248a04b25f978243cfcc681cbab4a9805", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "Removed DEFAULT_HASHING_ALGORITHM from lms (#37820)", "author": "jawad khan", "date": "2026-01-13T13:13:52Z", "url": "https://github.com/openedx/edx-platform/commit/99e7492b5e5a0b65f739f02119a27c0ae922567b", "is_breaking": true, "breaking_methods": ["keyword"]}, {"repo": "openedx/edx-platform", "message": "feat: added new email template for batched email notification (#37844)", "author": "Ahtisham Shahid", "date": "2026-01-13T05:49:12Z", "url": "https://github.com/openedx/edx-platform/commit/14e508ea9fbd5e4c37385341fd9d756c630e0f27", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/frontend-app-authoring", "message": "feat: Make sections/subsections/units selectable in course outline [FC-0114] (#2732)", "author": "Chris Ch\u00e1vez", "date": "2026-01-13T02:12:46Z", "url": "https://github.com/openedx/frontend-app-authoring/commit/4cda17e04635957d685746c2af39dddeaa7b48af", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37861 from openedx/dependabot/github_actions/actions/cache-5", "author": "Feanil Patel", "date": "2026-01-12T21:22:45Z", "url": "https://github.com/openedx/edx-platform/commit/bfc5fd5f944b11cf0196c23e54e19e373d6b869a", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "docs: Update the supported python version in the README.", "author": "Feanil Patel", "date": "2026-01-12T20:58:53Z", "url": "https://github.com/openedx/edx-platform/commit/d5cb793f8bdea4b6fff38a6aff06eca0188856e2", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37860 from openedx/dependabot/github_actions/actions/download-artifact-7", "author": "Feanil Patel", "date": "2026-01-12T20:37:29Z", "url": "https://github.com/openedx/edx-platform/commit/88ee0b11a5e4685fcb9bc5f41ed0edf2edb7dad1", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37862 from openedx/dependabot/github_actions/actions/upload-artifact-6", "author": "Feanil Patel", "date": "2026-01-12T20:36:43Z", "url": "https://github.com/openedx/edx-platform/commit/24b28d181178b7e5ae676d30241d75bbb64f8aad", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "Merge pull request #37863 from openedx/dependabot/github_actions/peter-evans/create-pull-request-8", "author": "Feanil Patel", "date": "2026-01-12T20:35:55Z", "url": "https://github.com/openedx/edx-platform/commit/7f6c678ad478d44011d32c5ef1f09b7e87064048", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "fix: Remove unused bad validation for images.", "author": "Feanil Patel", "date": "2026-01-12T17:58:21Z", "url": "https://github.com/openedx/edx-platform/commit/908aca440978de010825c7d9cdeebf366c80da21", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/frontend-app-authoring", "message": "chore(deps): update dependency @types/lodash to v4.17.23 (#2818)", "author": "renovate[bot]", "date": "2026-01-12T17:47:14Z", "url": "https://github.com/openedx/frontend-app-authoring/commit/969f7a285803c83066799696f5dfcdc2ba4e4a01", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "docs: Remove some code block annotations that were failing.", "author": "Feanil Patel", "date": "2026-01-12T16:11:48Z", "url": "https://github.com/openedx/edx-platform/commit/fa64270df4d3abf887e2101746f60ae41f9b5f3e", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "docs: Add the top-level decision records to the docs site.", "author": "Feanil Patel", "date": "2026-01-12T16:11:12Z", "url": "https://github.com/openedx/edx-platform/commit/35fab7bbb66f03f95f5fcc191d9bdb3e0e4c2396", "is_breaking": false, "breaking_methods": []}, {"repo": "openedx/edx-platform", "message": "docs: Ignore a venv generated during docs build.", "author": "Feanil Patel", "date": "2026-01-12T16:09:39Z", "url": "https://github.com/openedx/edx-platform/commit/02db4874f01f74fe5f2f227a28d15cfe600b7dc6", "is_breaking": false, "breaking_methods": []}];
    const ctx = document.getElementById("chart");
    const chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: [],
            datasets: [{
                label: "Commits",
                data: [],
                backgroundColor: '#0969da'
            }]
        },
    });

    function hoursAgo(dateStr) {
        const then = new Date(dateStr);
        const diff = (new Date() - then) / 3600000;
        if (diff < 1) return Math.round(diff * 60) + " minutes ago";
        return Math.round(diff) + " hours ago";
    }

    function updateDarkModeClasses() {
        // Always update all .commit and .commit.breaking elements
        document.querySelectorAll(".commit").forEach(el => {
            if (document.body.classList.contains("dark-mode")) {
                el.classList.add("dark");
            } else {
                el.classList.remove("dark");
            }
        });
    }

    window.toggleDark = function() {
        document.body.classList.toggle("dark-mode");
        updateDarkModeClasses();
    }

    window.render = function() {
        const searchInput = document.getElementById("searchBox");
        const authorInput = document.getElementById("authorBox");
        const repoInput = document.getElementById("repoBox");
        const repoSelect = document.getElementById("repoSelect");
        const breakingOnly = document.getElementById("breakingOnly");

        const search = searchInput ? searchInput.value.toLowerCase() : "";
        const author = authorInput ? authorInput.value.toLowerCase() : "";
        const repoText = repoInput ? repoInput.value.toLowerCase() : "";
        const showBreaking = breakingOnly && breakingOnly.checked;

        // Get selected repos (ignore "All repos" if nothing else selected)
        let selectedRepos = Array.from(repoSelect.selectedOptions)
            .map(opt => opt.value)
            .filter(v => v); // remove empty string

        let htmlContent = "";
        const grouped = {};

        commits.forEach(c => {
            if (search && !c.message.toLowerCase().includes(search)) return;
            if (author && !c.author.toLowerCase().includes(author)) return;

            // multi-select filter (exact match, allow multiple)
            if (selectedRepos.length && !selectedRepos.includes(c.repo)) return;

            // free-text repo filter (substring match)
            if (repoText && !c.repo.toLowerCase().includes(repoText)) return;

            // breaking filter
            if (showBreaking && !c.is_breaking) return;

            if (!grouped[c.repo]) grouped[c.repo] = [];
            grouped[c.repo].push(c);
        });

        Object.keys(grouped).forEach(r => {
            htmlContent += "<h2>üì¶ " + r + "</h2>";
            grouped[r].forEach(c => {
                let breakingBadge = "";
                let breakingClass = "";
                if (c.is_breaking) {
                    breakingBadge = '<span class="breaking-badge">‚ö†Ô∏è BREAKING</span>';
                    breakingClass = "breaking";
                }
                htmlContent += `
                    <div class="commit ${breakingClass}">
                        ${breakingBadge}<b>${c.message}</b><br>
                        üë§ ${c.author} ‚Äî ‚è∞ ${hoursAgo(c.date)}<br>
                        üîó <a href="${c.url}" target="_blank">View commit</a>
                    </div>
                `;
            });
        });

        document.getElementById("commits").innerHTML = htmlContent;

        // Update chart
        const repoCounts = Object.keys(grouped).map(k => grouped[k].length);
        const labels = Object.keys(grouped);
        chart.data.labels = labels;
        chart.data.datasets[0].data = repoCounts;
        chart.update();

        // Ensure dark mode classes are applied to new elements
        updateDarkModeClasses();
    }

    render();
});
</script>

</body>
</html>
